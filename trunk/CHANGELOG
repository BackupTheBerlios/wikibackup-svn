2008-07-15 Tyler Romeo

	Fixed major noticeable bugs in main script and in Database dump script.

	*WikiBackup.php: Added default value for $wgEnableBackupMagic to stop fatal error when variable is called for.
	*WikiBackup.php (fnArticleViewHeader): Changed reference to $user to global $wgUser; fixed typo in Database::fetchObject.
	*WikiBackup.php (fnArticleViewHeader): Fixed method of retrieving database info, since Database::fetchObject returns an object, not a string.
	*WikiBackup.php: Changed configuration variable check to use ternary operators in order to simplify code.

	*WikiBackup_body.php (WikiBackup.execInBackground): Fixed unclosed comment that holds documentation info.

	*WikiBackup.i18n.php: Added closing parentheses to "en" array.

	*DumpDatabase.php: Fixed array references to $argv. It does not seem to be complying with PHP documentation.
	*DumpDatabase.php: Changed configuration variable check to use ternary operators in order to simplify code.
	*DumpDatabase.php: Moved setting of $timestamp up so it can be used by the first mysql query.
	*DumpDatabase.php: Changed popen to proc_open (that was how it was supposed to be), and put working directory into proc_open() instead of using chdir().
	*DumpDatabase.php: Added missing quotation marks around 'r' in the $descriptorspec array.
	*DumpDatabase.php: Added an end of file check to the while loop as a sanity check if fgets returns false unexpectedly for some reason.

2008-07-14 Tyler Romeo

	Changed format of database dump script to use maintenance/commandLine.inc.

	*WikiBackup_body.php (WikiBackup.execute): Removed parameters contained global MediaWiki variables and messages.

	*DumpDatabase.php: Added require for $IP/maintenance/commandLine.inc.
	*DumpDatabase.php: Reduced number of server arguments and fixed variable check for $wgBackupSleepTime.
	*DumpDatabase.php: Changed all database queries to use Database class.
	*DumpDatabase.php: Changed standard mail() function to use the UserMailer class.

	Changed last backup column name in user table to include "user_" prefix".

	*WikiBackup.php (fnArticleViewHeader): Changed queried field from lastbackup to user_lastbackup.
	*WikiBackup_body.php (SpecialBackup.clearHeaderMessage): Changed queried field from lastbackup to user_lastbackup.
	*DumpDatabase.php: Changed queried field from lastbackup to user_lastbackup.

2008-07-13 Tyler Romeo

	Added more coding notes to the script.

	*WikiBackup_body.php: Added descriptions for each function and class.

2008-07-10 Tyler Romeo

	*DumpDatabase.php: Removed extraneous comma from the popen command.

	Added support for different database connection ports.

	*WikiBackup_body.php (WikiBackup.execute): Added $wgDBport to list of arguments given to background script.
	*DumpDatabase.php: In mysql_connect command, enclosed $wgDBserver in quotations and added $wgDBport to end.

	Added ability to import database dumps.

	*WikiBackup.php: Added new values to LogType arrays to support the 'backup-import' type. Also fixed message names.
	*WikiBackup.i18n.php: Added new import-backup messages to messages array. Also fixed messaged names for standardization.

	*WikiBackup_body.php (SpecialBackup.execute): Added check for 'backupimport' action.
	*WikiBackup_body.php (SpecialBackup.importBackup): New function to trigger import function on WikiBackup class.
	*WikiBackup_body.php (WikiBackup.import): New function to trigger ImportDatabase.php file to import XML dumps.
	*java/mwdumper.jar and java/mysql-connector.jar: Added java files that aid in importing the database.

	*ImportDatabase.php: Added new file to import database. File needs to be changed to dump existing SQL info before importing.

	Added feature where scripts locks database when importing.

	*WikiBackup_body.php (WikiBackup.import): Added $wgReadOnlyFile parameter to import script file. Also added message parameter.
	*ImportDatabase.php: Added code to lock database with message passed by main script.
	*WikiBackup.i18n.php: Added message for when database is locked.

	*ImportDatabase.php: Added code to truncate revision, page, and text tables for successful import.

	Made backup complete header disappear after user visits Special Page.

	*WikiBackup_body.php (SpecialBackup.mainBackupPage): Added call to SpecialBackup.clearHeaderMessage after all HTML has been output.
	*WikiBackup_body.php (SpecialBackup.clearHeaderMessage): New function that clears lastbackup field in user table, which clears header message.

	Added hooks before creation, deletion, and import of backups. The first parameter of each is always the WikiBackup object.

	*WikiBackup_body.php (WikiBackup.execute): Added BeforeBackupCreation hook that can be used to stop the backup if it returns false or reset $UserCanEmail.
	*WikiBackup_body.php (WikiBackup.import): Added BeforeBackupImport hook that can stop import if it returns false.
	*WikiBackup_body.php (WikiBackup.delete): Added BeforeBackupDeletion hook that can be used to stop deletion if it returns false.

2008-07-09 Tyler Romeo

	Enhanced function commenting to work with Javadoc.

	*WikiBackup.php: Added comments according to Javadoc documentation.

	Added logging when creating backups.

	*WikiBackup.php: Added log types to global array of log types and set message names.
	*WikiBackup_body.php (WikiBackup.execute): Added creation of log entry to function.
	*WikiBackup_body.php (WikiBackup.delete): Added creation of log entry to function.
	*WikiBackup.i18n.php: Added messages for log entries and headers as defined in WikiBackup.php.

2008-07-07 Tyler Romeo

	*WikiBackup.php: Added more comments.

	Changed hook so user is notified when backup completes, not at login.

	*WikiBackup.php (53): Changed hook from "UserLoginComplete" to "ArticleViewHeader"
	*WikiBackup.php (83): Changed function to adapt to new hook.

	Fixed parser function so URL to backup download is correct.

	*WikiBackup.php (BackupParserRender): Added global variables $wgServer and $wgScriptPath to URL.

	Fixed parser function so displaytext defaults to URL instead of blank, which would just generate a number.

	*WikiBackup.php (BackupParserRender): Changed if statement to check if displaytext is blank, and set it to the URL if blank.
